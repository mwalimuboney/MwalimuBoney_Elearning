<div class="dept-container container mt-5">
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a routerLink="/manage-schools">Schools</a></li>
      <li class="breadcrumb-item active">Departments</li>
    </ol>
  </nav>

  <div class="d-flex justify-content-between align-items-end mb-4">
    <div>
      <h2 class="fw-bold">Departments</h2>
      <p class="text-muted">Organize academic units and staff for this institution.</p>
    </div>
    <button class="btn btn-primary" (click)="addDepartment()">
      <i class="bi bi-plus-lg me-2"></i>New Department
    </button>
  </div>

  <div class="table-responsive shadow-sm rounded-3">
    <table class="table table-hover align-middle bg-white mb-0">
      <thead class="table-light">
        <tr>
          <th>Department Name</th>
          <th>Head of Dept</th>
          <th class="text-center">Courses</th>
          <th class="text-center">Staff</th>
          <th class="text-end">Actions</th>
        </tr>
      </thead>
      <tbody>
        @for (dept of departments; track dept.id) {
          <tr>
            <td>
              <div class="fw-bold text-primary">{{ dept.name }}</div>
              <div class="small text-muted">{{ dept.description | slice:0:50 }}...</div>
            </td>
            <td>{{ dept.head_of_department || 'Not Assigned' }}</td>
            <td class="text-center"><span class="badge bg-info text-dark">{{ dept.course_count }}</span></td>
            <td class="text-center"><span class="badge bg-secondary">{{ dept.staff_count }}</span></td>
            <td class="text-end">
              <button class="btn btn-sm btn-outline-dark me-2" (click)="editDept(dept)">Edit</button>
              <button class="btn btn-sm btn-primary" (click)="viewCourses(dept.id)">Courses</button>
            </td>
          </tr>
        } @empty {
          <tr>
            <td colspan="5" class="text-center py-5 text-muted">
              No departments found for this school.
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
</div>